<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin Price Predictor</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/plotly.js-dist@2.18.2/plotly.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.3.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="d-flex flex-wrap justify-content-center py-3 mb-4 border-bottom">
            <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-decoration-none">
                <span class="fs-4 text-primary">Bitcoin Price Predictor ðŸ“ˆ</span>
            </a>
            <div class="d-flex align-items-center">
                <div class="current-price me-3">
                    Current Price: <span id="current-price" class="price-value">${{ "%.2f"|format(current_price|default(0.00)) }}</span>
                </div>
                <button id="dark-mode-toggle" class="btn btn-sm btn-outline-secondary">
                    <span id="theme-icon">ðŸŒ“</span>
                </button>
            </div>
        </header>

        <div class="row mt-3">
            <div class="col-md-3">
                <div class="card">
                    <div class="card-header">
                        <h5>Prediction Settings</h5>
                    </div>
                    <div class="card-body">
                        <form id="prediction-form">
                            <div class="mb-3">
                                <label for="histRange" class="form-label">Historical Data Range (days)</label>
                                <input type="range" class="form-range" id="histRange" min="30" max="365" step="30" value="180">
                                <div class="d-flex justify-content-between">
                                    <small>30</small>
                                    <small id="histRangeValue">180</small>
                                    <small>365</small>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="predDays" class="form-label">Prediction Horizon (days)</label>
                                <input type="range" class="form-range" id="predDays" min="1" max="5" step="1" value="3">
                                <div class="d-flex justify-content-between">
                                    <small>1</small>
                                    <small id="predDaysValue">3</small>
                                    <small>5</small>
                                </div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="targetAccuracy" class="form-label">Target Accuracy (%)</label>
                                <input type="range" class="form-range" id="targetAccuracy" min="85" max="99" step="0.5" value="95">
                                <div class="d-flex justify-content-between">
                                    <small>85%</small>
                                    <small id="targetAccuracyValue">95%</small>
                                    <small>99%</small>
                                </div>
                            </div>
                            
                            <div class="mb-3 form-check">
                                <input type="checkbox" class="form-check-input" id="useEnsemble" checked>
                                <label class="form-check-label" for="useEnsemble">Use Model Ensemble</label>
                            </div>
                            
                            <div id="weightSettings" class="mb-3 p-2 border rounded">
                                <div class="mb-2">
                                    <label for="mlWeight" class="form-label small">ML Model Weight</label>
                                    <input type="range" class="form-range" id="mlWeight" min="0" max="1" step="0.1" value="0.6">
                                    <div class="d-flex justify-content-between">
                                        <small>0</small>
                                        <small id="mlWeightValue">0.6</small>
                                        <small>1</small>
                                    </div>
                                </div>
                                
                                <div class="mb-2">
                                    <label for="arimaWeight" class="form-label small">ARIMA Model Weight</label>
                                    <input type="range" class="form-range" id="arimaWeight" min="0" max="1" step="0.1" value="0.2">
                                    <div class="d-flex justify-content-between">
                                        <small>0</small>
                                        <small id="arimaWeightValue">0.2</small>
                                        <small>1</small>
                                    </div>
                                </div>
                                
                                <div class="mb-2">
                                    <label for="esWeight" class="form-label small">Exp Smoothing Weight</label>
                                    <input type="range" class="form-range" id="esWeight" min="0" max="1" step="0.1" value="0.2">
                                    <div class="d-flex justify-content-between">
                                        <small>0</small>
                                        <small id="esWeightValue">0.2</small>
                                        <small>1</small>
                                    </div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100">Generate Prediction</button>
                        </form>
                    </div>
                </div>
            </div>
            
            <div class="col-md-9">
                <ul class="nav nav-tabs" id="mainTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="predictions-tab" data-bs-toggle="tab" data-bs-target="#predictions" type="button" role="tab" aria-controls="predictions" aria-selected="true">Predictions</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="historical-tab" data-bs-toggle="tab" data-bs-target="#historical" type="button" role="tab" aria-controls="historical" aria-selected="false">Historical Data</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="accuracy-tab" data-bs-toggle="tab" data-bs-target="#accuracy" type="button" role="tab" aria-controls="accuracy" aria-selected="false">Model Accuracy</button>
                    </li>
                </ul>
                
                <div class="tab-content p-3 border border-top-0 rounded-bottom" id="mainTabsContent">
                    <div class="tab-pane fade show active" id="predictions" role="tabpanel" aria-labelledby="predictions-tab">
                        <div id="prediction-loading" class="text-center py-5 d-none">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <p class="mt-2">Generating predictions...</p>
                        </div>
                        
                        <div id="prediction-content" class="d-none">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Current Bitcoin Price</h5>
                                            <h3 class="price-display" id="current-price-display">$0.00</h3>
                                            <p class="price-change" id="current-price-change">0.00% from yesterday</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Predicted Price (<span id="pred-days-label">3</span> days from now)</h5>
                                            <h3 class="price-display" id="predicted-price-display">$0.00</h3>
                                            <p class="price-change" id="predicted-price-change">0.00%</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <h5>Detailed Price Predictions</h5>
                            <div class="table-responsive">
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>Day</th>
                                            <th>Date</th>
                                            <th>Predicted Price</th>
                                            <th>Change</th>
                                        </tr>
                                    </thead>
                                    <tbody id="prediction-table">
                                        <!-- Prediction data will be inserted here -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <h5>Price Prediction Chart</h5>
                            <div id="prediction-chart" style="height: 500px;"></div>
                        </div>
                        
                        <div id="prediction-intro" class="text-center py-5">
                            <p>ðŸ‘ˆ Adjust settings in the sidebar and click 'Generate Prediction' to start</p>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="historical" role="tabpanel" aria-labelledby="historical-tab">
                        <div class="mb-3">
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="show-volume" checked>
                                        <label class="form-check-label" for="show-volume">Show Volume</label>
                                    </div>
                                    <div class="form-check form-check-inline">
                                        <input class="form-check-input" type="checkbox" id="show-ma" checked>
                                        <label class="form-check-label" for="show-ma">Show Moving Averages</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="historical-chart" style="height: 500px;"></div>
                        
                        <h5 class="mt-4">Recent Bitcoin Prices</h5>
                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Price</th>
                                        <th>Volume</th>
                                    </tr>
                                </thead>
                                <tbody id="historical-table">
                                    <!-- Historical data will be inserted here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div class="tab-pane fade" id="accuracy" role="tabpanel" aria-labelledby="accuracy-tab">
                        <div id="accuracy-loading" class="text-center py-5">
                            <p>Generate a prediction to see model accuracy metrics</p>
                        </div>
                        
                        <div id="accuracy-content" class="d-none">
                            <div class="row mb-4">
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Overall Prediction Accuracy</h5>
                                            <h3 id="combined-accuracy">0.00%</h3>
                                            <p id="accuracy-vs-target">0.00% vs target</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Directional Accuracy</h5>
                                            <h3 id="directional-accuracy">0.00%</h3>
                                            <p>Ability to predict price movement direction</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="accuracy-chart" style="height: 400px;"></div>
                            
                            <h5 class="mt-4">Model Information</h5>
                            <div id="model-info">
                                <!-- Model info will be inserted here -->
                            </div>
                            
                            <div class="mt-4">
                                <button class="btn btn-sm btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#technicalMetrics" aria-expanded="false" aria-controls="technicalMetrics">
                                    Technical Metrics Details
                                </button>
                                <div class="collapse mt-2" id="technicalMetrics">
                                    <div class="card card-body">
                                        <ul id="technical-metrics-list">
                                            <!-- Technical metrics will be inserted here -->
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="footer mt-5 py-3 text-center">
            <div class="container">
                <span class="text-muted">
                    Bitcoin Price Predictor | Built with <a href="https://flask.palletsprojects.com/" target="_blank">Flask</a> | Uses CoinGecko API for price data
                </span>
                <p class="small text-muted">Note: This tool is for educational purposes only. Cryptocurrency investments are subject to market risks.</p>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
